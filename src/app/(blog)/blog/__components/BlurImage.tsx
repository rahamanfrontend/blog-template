/* eslint-disable jsx-a11y/alt-text */
"use client";

import { dynamicBlurDataUrl } from "../_libs/dynamic-blur-data-url";
import Image from "next/image";
import { useEffect, useState } from "react";

// Importing ImageProps type from 'next/image'
import type { ImageProps } from "next/image";

interface BlurImageProps
  extends Omit<ImageProps, "src" | "placeholder" | "blurDataURL"> {
  src: string;
}

const defaultURL =
  "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDABQODxIPDRQSEBIXFRQYHjIhHhwcHj0sLiQySUBMS0dARkVQWnNiUFVtVkVGZIhlbXd7gYKBTmCNl4x9lnN+gXz/2wBDARUXFx4aHjshITt8U0ZTfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHz/wAARCAOTAqYDASIAAhEBAxEB/8QAGgABAQEBAQEBAAAAAAAAAAAAAAECAwYFBP/EABgQAQEBAQEAAAAAAAAAAAAAAAARARIC/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAECA//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAwDAQACEQMRAD8A+mA5tgAAAIAAioAioCAAiKgCKgIioCIqAMqgIiooiKmgiaqAms60yCJq6mgms61rIIioCIqAyioCIqAiKiCIqAiKgCKgCKgAAIAoAAoAAAKACiKAqKIKigACqAIKiigCoAAoAoAI9KAyoAACAAAgACACAAiKgCACIqAiKgIioCIqKIioCamqgJrOqgJqKgIyupoJqaupoJrOtazoJqLqAiKgIiogiKgIioAioAgAAgAAACiiKAACgAKigKigACKACgAKgooAAAKICqAD0oDIAgAAAIAACAgCKgCKgICAIqAiKgIiooiKgImqgIyqAmpqpoJqarIJqaqaCai6zoIi6mgiKgIisgIIgIAIioAgAgACAAAAAoKgCgAoigKgCgAoAigAoigAKKIoAAAAAAPSgMqAAAgAACAAgAIAICAIqAgIAgigioCIIAyqAiKgJqarIJqaqaCamrrOgmoupoIi6mgiCAiKgIiogiKgCACAgAIAAAAAAoAAoigKgCgAoAKIoCoogqAqgKgACiKKACAAr0ogyKIAAAIAAIACAIqAIqAgIoIqAiKgIioCIqAiKyAyqAiKmgiLrOgmoqAmorIDKoCIqAiKgIiogiKgIioAioAgAAgKIAogooigAAoigKigKgCqgCgAoACoKKAAAAqAKIA9KAyAICoAAIAAAgAgIoAgCACIqAiKgIioCIqAiKgIisgMqgImqmgmoICIqAmoqAiCAiKgIioggIAgAgIACAAAAAAKAAKIoCoAoAKIoKIoKIoCoKKAAqAKIoAAAAPSAIAICiAAICoACAAggAIAgAiKgICAIICIqAiKgIioCIICIqAiKgIggIioCIqAiCAIIgIAIioAgAIAAgAAAAoKgCgAogCqgCgAoAKACiKoAAogCgAAAAA9IAgCAKgAAgAICoIACAIqAIIAgAiKgIioCIqAiKgIioCIrIDKoCIqAiCAMqgIioCIqAiKgIioggIAgAIAAICoACoKKIAoAKIoCoAqoAqoAoCiiKAqAKIoAAAAKIA9IIIKIAAgKIACAAgAIAIAICAIAIioCAgCCAiKgIioCIIAggIioCIIAggIioCIqAiKgIioCAiAgAIAAgCiAKIKKIAoAKIoCoAqoAqoAoCiiAKqAKIAoAAAAAPRgIAICiAAICoACAAgAIIACAIIAggCCAIqAiCAIIAggDKoCIqAiCAMqgIioCIIAggCACIqICCAqAAIAogAqCiiAKACiKAqAKqAKqCiiKCiAKACiAKIoAAAAPRiCCiAKggKIACAAIAIAIACCAIAICAIIAgggggCCAMqgIioCIIAggJqaqAiCAIIAggCCICAAggAIKqAAAAAAqCiiKCiAKqAKrKqKIoKIAqoAoig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";

const BlurImage: React.FC<BlurImageProps> = ({ src, ...props }) => {
  const [blurDataURL, setBlurDataURL] = useState<string>("");

  useEffect(() => {
    dynamicBlurDataUrl(src).then((dataUrl: string) => {
      setBlurDataURL(dataUrl || defaultURL);
    });
  }, [src]);

  return (
    <Image
      src={src}
      placeholder="blur"
      blurDataURL={blurDataURL || defaultURL}
      {...props} // Spread the rest of the props here
    />
  );
};

export default BlurImage;
